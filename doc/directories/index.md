## Directories

Описание директорий

### TOC

- [Directories](#directories)
  - [TOC](#toc)
  - [General](#general)
  - [Rules](#rules)
    - [Analytics](#analytics)
    - [Bo](#bo)
    - [Frontend](#frontend)
    - [Integration](#integration)
    - [Junk](#junk)
    - [V1](#v1)
    - [V2](#v2)
    - [V3l1](#v3l1)
    - [V3l2](#v3l2)

### General

Основное

* Файлы пейлоадов всегда располагаются в директориях внутри директории `/data/{ENV}`, где `ENV` соответствует окружению и принимает значения `prod`, `stage` или `test` 
* Файлы пейлоадов располагаются в директориях внутри директории `/data/{ENV}` в соответствии с правилами размещения файлов пейлоадов токенов описанным в разделе [Rules](#rules)
* Название файла пейлоада соответствует названию приложения использующего его для взаимодействия с/в v3 (например, `/data/prod/v3l2/account-api.json`)
* Пейлоады токенов используемых в юрисдикции отличной от Российской Федерации (например, Казахстане) должны содержать в названии файлов пейлоадов постфикс `*--kz.json` (например, `/data/prod/v2/gui-gameselector--kz.json`)

### Rules

Правила размещения файлов пейлоадов токенов в директориях

* В разделе определены и описаны директории для хранения пейлоадов токенов
* Другие директории создавать нельзя 

#### Analytics

Директория для файлов пейлоадов токенов используемых для аналитики

* Токены используются приложениями
* Токены могут использоваться людьми
* Пейлоады токенов обязательно содержат гейты (`gates`) для обращения из вне

#### Bo

Директория для файлов пейлоадов токенов используемых Бэкофисом

* Токены используются приложениями
* Пейлоады токенов обязательно содержат гейты (`gates`) для обращения из вне

#### Frontend

Директория для файлов пейлоадов токенов используемых фронтендом

* Токены используются приложениями
* Сейчас фронтенд-репозитории располагаются в разных директориях Gitlab (v1 и др.)
* Пейлоады токенов обязательно содержат гейты (`gates`) для обращения из вне

#### Integration

Директория для файлов пейлоадов токенов используемых для интеграции внешних систем с v3

* Токены используются внешними приложениями
* Названия файлов пейлоадов соответствует названию интеграции (например, `online.json`)
* В пейлоаде может содержаться несколько ролей для взаимодействия с/в v3 (например, синхронизация гостей и передача ставок)
* Пейлоады токенов обязательно содержат гейты (`gates`) для обращения из вне

#### Junk

Директория для файлов пейлоадов токенов используемых для разовых взаимодействий с v3 из вне

* Токены используются людьми для отладки, проверки 
* Реже, токены могут использоваться приложениями
* Токены имеют время жизни
* Пейлоады токенов обязательно содержат гейты (`gates`) для обращения из вне

#### V1

Директория для файлов пейлоадов токенов используемых v1

* Токены используются приложениями
* Пейлоады токенов обязательно содержат гейты (`gates`) для обращения из вне

#### V2

Директория для файлов пейлоадов токенов используемых v2

* Токены используются приложениями
* Пейлоады токенов обязательно содержат гейты (`gates`) для обращения из вне

#### V3l1

Директория для файлов пейлоадов токенов используемых v3l1 слоем (гейтами)

* Токены используются приложениями
* Пейлоады токенов не содержат гейты (пустой `gates`) для не возможности обращения из вне

#### V3l2

Директория для файлов пейлоадов токенов используемых v3l2 слоем (api-сервисами)

* Токены используются приложениями
* Токены используются только внутри v3 (в пейлоадах токенов должны отсутствовать гейты)
* Пейлоады токенов, как правило, содержат разрешения для публикации [результирующих событий](https://vcs.bingo-boom.ru/offline/application/v3/doc/-/blob/master/event/index.md#result-type)
* Пейлоады токенов могут содержат разрешения для публикации [инициирующих событий](https://vcs.bingo-boom.ru/offline/application/v3/doc/-/blob/master/event/index.md#init-type)
* Пейлоады токенов не содержат гейты (пустой `gates`) для не возможности обращения из вне
